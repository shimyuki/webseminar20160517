package window.whiteboard.imgdoc {    import flash.display.*;	import flash.text.*;	import flash.events.*;	import flash.geom.*;	    public class DragingDir extends Sprite {		private var m_bitmap:Bitmap;		private var m_startX:Number;		private var m_startY:Number;		public function DragingDir(){			alpha = 0.5;			m_bitmap = Bitmap( addChild( new Bitmap( null, "auto", true)));			//addChild( m_bitmap);		}		public function getStartX() : Number { return m_startX;}		public function getStartY() : Number { return m_startY;}		/*		public function setCache( bmpdata:BitmapData) {			if( m_bitmap.bitmapData) m_bitmap.bitmapData.dispose();			m_bitmap.bitmapData = bmpdata;		}*/		public function setCacheAndStartPosi( dir_arr:Array, folderCon:DisplayObject) {			if( m_bitmap.bitmapData) m_bitmap.bitmapData.dispose();												// 選択中のDIR(dir_arr)の範囲をもとめる			var min_x = Number.MAX_VALUE;			var min_y = Number.MAX_VALUE;			var max_x = Number.MIN_VALUE;			var max_y = Number.MIN_VALUE;			var rect:Rectangle;			var dir:Dir;			for each( dir in dir_arr) {								rect = dir.getRect( folderCon);				if( rect.x < min_x) min_x = rect.x;				if( rect.x + dir.getViewWidth() > max_x) max_x = rect.x + dir.getViewWidth();				if( rect.y < min_y) min_y = rect.y;				if( rect.y + dir.getViewHeight_single() > max_y) max_y = rect.y + dir.getViewHeight_single();			}						var all_bmpdata:BitmapData = new BitmapData( max_x - min_x, max_y - min_y, true, 0x00000000);						for each( dir in dir_arr) {								var bmpdata:BitmapData = dir.getCache4Drag();								rect = new Rectangle( 0, 0, dir.getViewWidth(), dir.getViewHeight_single());				all_bmpdata.copyPixels( bmpdata, rect, new Point());			}			m_bitmap.bitmapData = all_bmpdata;						// スタート位置			x = m_startX = min_x;			y = m_startY = min_y;		}			}}