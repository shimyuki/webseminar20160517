package window.chat {	import flash.display.*;	import flash.events.*;	import partition.*;	import window.*;	import window.setting.*;	import window.ResizableContainer;		import flash.external.ExternalInterface;		// サイズ変更可能ウィンドウ	public class ResizableChatWindow extends ResizableWindow {				private var m_chatParentOfSettingCon = null; // MemberSettingContentsでのチャットの親コンテナ。		private var m_chatCon:ChatContainer = null;		private var m_container:ResizableContainer;				public function ResizableChatWindow() {			super( 100, 100);			addEventListener( Event.ADDED_TO_STAGE, setChatCon);			addEventListener( Event.REMOVED_FROM_STAGE, resetChatCon);						popupWidth = 400;			popupHeight = 500;						m_container = super.setContents( new ResizableContainer( 100, 100, 100, 100));		}				// 受講者用関数。自分と先生との個別チャット用		override public function setContents( chatCon) {			if( Main.CONF.isPro( Main.CONF.UID)) throw new ArgumentError( "ResizableChatWindow:setContents(): 講師はこの関数は使えません！"); 			m_chatCon = chatCon;			//m_container = super.setContents( new ResizableContainer( 100, 100, 100, 100));			//return m_container;		}				// 講師用関数。各受講生との個別チャットポップアップウィンドウ用		// ポップアップされる直前、中身を切り替えるために呼ばれる。		public function shareChatCon( chatCon:ChatContainer) {			if( ! Main.CONF.isPro( Main.CONF.UID)) throw new ArgumentError( "ResizableChatWindow:setContents(): 受講者はこの関数は使えません！"); 			if( m_chatCon != null) {				resetChatCon();			}			m_chatCon = chatCon;			m_chatParentOfSettingCon = chatCon.parent;					}				function setChatCon( e:Event) {			m_chatCon.x = 0;			m_chatCon.y = TitleBar.H + PAD;			m_container.addChild( m_chatCon);		}				// ポップアップした後戻す		function resetChatCon( e:Event = null) {			if( m_chatParentOfSettingCon != null) {				m_chatParentOfSettingCon.addChild( m_chatCon);				if( m_chatParentOfSettingCon as MemberChat) {					m_chatCon.x = m_chatCon.y = MemberChat.PAD;				}			} else {				if( m_container.contains( m_chatCon)) m_container.removeChild( m_chatCon);			}			m_chatCon.setViewHeight( MemberChat.H - 20);		}		override public function setViewWidth( _w:Number, debug:String = ""):void {			super.setViewWidth( _w);						if( m_chatParentOfSettingCon != null) m_chatCon.setViewWidth( _w - 10);			else m_chatCon.setViewWidth( _w);		}		override public function setViewHeight( _h:Number):void {			super.setViewHeight( _h);			//ExternalInterface.call( "flashFunc_title", "ChatWin:setViewHeight(" + _h + ")");//Main.addDebugMsg("ChatWin:setViewHeight(" + _h + ")");						if( m_chatParentOfSettingCon != null) m_chatCon.setViewHeight( _h - 50);			else m_chatCon.setViewHeight( _h - 40);		}	}}